<html>
    <head>
      <meta charset="utf-8" />
      <meta http-equiv="X-UA-Compatible" content="IE=edge" />
      <title>Location-based AR.js demo</title>
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
      <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
      <script src="https://unpkg.com/aframe-look-at-component@0.8.0/dist/aframe-look-at-component.min.js"></script>
      <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script>
      <script src="index8.js"></script>
    </head>
  
    <body style="margin: 0; overflow: hidden;">
      <a-scene
        vr-mode-ui="enabled: false"
        embedded
        arjs="sourceType: webcam; debugUIEnabled: false;"
      >
      <img id="kyubi" class="kyubi" src="../0-13.png">
        <a-text
        id="id"
          value="aaa."
          look-at="[gps-camera]"
          scale="50 50 50"
          gps-entity-place="latitude: 36.14440307353002 ; longitude: 139.38239471376482;"
        ></a-text>
        <a-entity id="kyu2" mb-text2 position="0.5 2.5 -1" data-text=""></a-entity>-->
        <a-entity id="nihon" mb-text position="0.5 2 -1" data-text=""></a-entity>-->
        <a-entity id="nihon2" mb-text position="0.5 1.5 -1" data-text="Êñ∞.„Åì„Çì„Å´„Å°„ÅØ‰∏ñÁïå(script)üåù"></a-entity>
        <a-image
            id="kyu"
                class="#kyu"
                src="../0-13.png"
                position="1 1.6 -2.5"
                ></a-image>-->
        <div id="inkyu"></div>
        <a-camera gps-camera rotation-reader> </a-camera>
      </a-scene>
      <div style="position: fixed; bottom: 500px;">
        <div>
            <input type="text" id="tbox">
        </div>
        
        <button onclick="ano()">anobotan</button>
        <button onclick="run()">run</button>
        <form action="upload.php" method="post" enctype="multipart/form-data">
            <p>
              <input type="file" name="upfile" id="upfile" accept="image/*" capture="camera" />
              <span style="color: #ff0000;" data-mce-style="color: #ff0000;"><div><img id="thumbnail" src=""></div></span>
            </p>
            <p><input type="submit" name="save" value="‰øùÂ≠ò" /></p>
          </form>
    </div>
    </body>
    <script>
      function aframeMutlByte(){
        console.log("koko")
          document.querySelectorAll('[mb-text]').forEach(mb_text2=>{
              console.log(mb_text2.dataset.text)
              
              let text  =mb_text2.dataset.text
              let text_cnt = text.length
              let width = text_cnt*1.4
              let height= 1.6
              let cvs = document.createElement('canvas')
              cvs.setAttribute("id","can");
              let ctx = cvs.getContext('2d')
              cvs.width = width*100
              cvs.height = height*100
              ctx.fillStyle = "rgb(50, 200, 30)"
              ctx.font = '100pt Arial'
              ctx.fillText(text,0,125)
      
              let base64 = cvs.toDataURL("image/png")
              //„Åì„Åì„Çí‰Ωø„ÅÜ
              //
              //
              //
              mb_text2.innerHTML=`<a-image scale="${(width)/10} ${height/10} 1" src="${base64}"></a-image>`
          })
      }
          
      </script>
      <script>
        $('#upfile').change(function(){
          if (this.files.length > 0) {
            console.log("iruyo");
            // ÈÅ∏Êäû„Åï„Çå„Åü„Éï„Ç°„Ç§„É´ÊÉÖÂ†±„ÇíÂèñÂæó
            var file = this.files[0];
            
            // reader„ÅÆresult„Éó„É≠„Éë„ÉÜ„Ç£„Å´„ÄÅ„Éá„Éº„ÇøURL„Å®„Åó„Å¶„Ç®„É≥„Ç≥„Éº„Éâ„Åï„Çå„Åü„Éï„Ç°„Ç§„É´„Éá„Éº„Çø„ÇíÊ†ºÁ¥ç
            var image =new Image();
            var reader = new FileReader();
            
            reader.readAsDataURL(file);
            
            reader.onload = function() {
              //let nihon2=document.getElementById("nihon2");
              //var new_kyu=document.createElement('a-image id="kyu" class="#kyu" src="../0-13.png" position="1 1.6 -2.5"')
              //
              //let inkyu=document.getElementById("inkyu");
              //inkyu.innerHTML='<a-image id="kyu" class="#kyu" src="../0-13.png" position="1 1.6 -2.5" ></a-image>';
              $('#kyu').attr('src', reader.result );
              image.src=reader.result;
              image.onload=function(){
                document.querySelectorAll('[mb-text2]').forEach(mb_text2=>{
                mb_text2.innerHTML=`<a-image scale="${(image.naturalWidth)/1000} ${(image.naturalHeight)/1000} 1" src="${reader.result}"></a-image>`
                })
              }
            }
          }
        });
        </script>
    <script src="index8.js"></script>
  </html>